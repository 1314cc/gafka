# kguard

Kafka clusters body guard that emits health info to InfluxDB.

### Architecture

    
                       ðŸ‘¥ âœ‰ here I am
                        |              
        +---------------------------------+
        |               |                 |
    +--------+     +----------+      +----------+
    | zabbix |     | InfluxDB |      | OpenTSDB |
    +--------+     +----------+      +----------+
        |            |                   |
        |            +-------------------+
        |               ^
        | periodically  |
        | call          | flush
        | RESTful       |
        |          +------------+
        |          | telementry |
        |          +------------+
        |               | collect
        |               V
        |    +-------------------+
        |    | in-memory metrics |
        |    +-------------------+
        |               ^
        |               | write
        |       +-----------------------------------+
        V       |            |                      |
    +-------------+   +--------------+   +----------------------------+
    | HTTP server |   | SOS receiver |   | Watchers/MonitorAggregator |
    +-------------+   +--------------+   +----------------------------+
        |                    |                      |
        +-------------------------------------------+
                             | contains
                     +---------------+          +-----------------+     +-----------------+
                     | kguard leader |          | kguard standby1 |     | kguard standby2 | 
                     +---------------+          +-----------------+     +-----------------+
                             |                          |                       |
                             +--------------------------------------------------+
                                                  | election
                                          +--------------------+
                                          | zookeeper ensemble |
                                          +--------------------+

