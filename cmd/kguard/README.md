# kguard

Kafka clusters body guard that emits health info to InfluxDB.

### Architecture

    
      ðŸ‘¥ âœ‰                       ðŸ‘¥
        |                       |
        |               +-----------------+
        |               |                 |
    +--------+     +----------+      +----------+
    | zabbix |     | InfluxDB |      | OpenTSDB |
    +--------+     +----------+      +----------+
        |            |                   |
        |            +-------------------+
        |               ^
        |               | flush
        |               |
        |          +------------+
        |          | telementry |
        |          +------------+
        |               |
        |               | collect
        |               V
        |    +-------------------+
        |    | in-memory metrics |
        |    +-------------------+
        |               ^
        | REST          | write
        |               |
        |       +-----------------------------------+
        V       |            |                      |
    +-------------+   +--------------+   +----------------------------+
    | HTTP server |   | SOS receiver |   | Watchers/MonitorAggregator |
    +-------------+   +--------------+   +----------------------------+
        |                    |                      |
        +-------------------------------------------+
                             |
                     +---------------+          +-----------------+     +-----------------+
                     | kguard leader |          | kguard standby1 |     | kguard standby2 | 
                     +---------------+          +-----------------+     +-----------------+
                             |                          |                       |
                             +--------------------------------------------------+
                                                  |
                                                  | election
                                                  |
                                          +--------------------+
                                          | zookeeper ensemble |
                                          +--------------------+

